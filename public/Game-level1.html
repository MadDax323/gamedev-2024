<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flappy Bird Style Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      position: relative;
    }

    #myBody {
      background-image: url('https://user-images.githubusercontent.com/18351809/46888871-624a3900-ce7f-11e8-808e-99fd90c8a3f4.png');
      background-repeat: repeat-x;
      background-size: cover;
      background-position: 0 0;
      height: 100vh;
    }

    #myImg01 {
      position: absolute;
      width: 100px;
      height: 80px;
    }

    .obstacle {
      position: absolute;
      background-color: red;
    }
  </style>
</head>
<body id="myBody">

  <h1 align="center" style="color: red; position: absolute; width: 100%; top: 50%; transform: translateY(-50%); text-align: center;">Click Anywhere to Start</h1>

  <img id="myImg01" src="https://freepngimg.com/thumb/logo/109933-logo-bird-flappy-png-download-free.png">

  <script>
    // Global Variables
    let myGravity = 1.5; // Gravity strength
    let myJump = -20; // Jump height
    let myGlobalX = 0; // Background scroll position
    let myVerticalSpeed = 0; // Speed of the character's vertical movement
    let isGameRunning = false; // Tracks if the game is running
    let scrollInterval, gravityInterval, obstacleInterval;
    let obstacles = []; // Array to store obstacles

    const character = document.getElementById("myImg01");

    // Position the main character in the center of the screen
    function centerCharacter() {
      character.style.left = `${window.innerWidth / 2 - 50}px`;
      character.style.top = `${window.innerHeight / 2 - 40}px`;
    }

    // Function to start the game on the first click
    function startGame() {
      if (!isGameRunning) {
        isGameRunning = true;

        // Remove the "Click Anywhere to Start" message
        document.querySelector("h1").style.display = "none";

        // Start the background scrolling
        scrollBackground();

        // Start the gravity loop
        applyGravity();

        // Generate obstacles
        generateObstacles();

        // Add click listener for jumping
        document.addEventListener("click", jump);
      }
    }

    // Function to scroll the background
    function scrollBackground() {
      scrollInterval = setInterval(() => {
        if (isGameRunning) {
          myGlobalX -= 2; // Move background left
          document.getElementById("myBody").style.backgroundPosition = `${myGlobalX}px 0px`;
        }
      }, 20);
    }

    // Function to apply gravity
    function applyGravity() {
      gravityInterval = setInterval(() => {
        if (isGameRunning) {
          let currentTop = parseInt(character.style.top);

          // Apply gravity to the vertical speed
          myVerticalSpeed += myGravity;

          // Update character position
          character.style.top = `${currentTop + myVerticalSpeed}px`;

          // Prevent character from falling below the screen
          if (currentTop + myVerticalSpeed >= window.innerHeight - 80) {
            character.style.top = `${window.innerHeight - 80}px`;
            myVerticalSpeed = 0; // Stop movement if at the bottom
          }

          // Prevent character from going above the screen
          if (currentTop + myVerticalSpeed <= 0) {
            character.style.top = `0px`;
          }

          // Check collisions
          myCheckHit();
        }
      }, 20);
    }

    // Function to make the character jump
    function jump() {
      if (isGameRunning) {
        myVerticalSpeed = myJump; // Apply an upward force
      }
    }

    // Function to generate obstacles
    function generateObstacles() {
      obstacleInterval = setInterval(() => {
        let obstacleHeight = Math.random() * 200 + 50; // Random height between 50 and 250
        let gap = 150; // Gap between top and bottom obstacles

        // Create top obstacle
        let topObstacle = document.createElement("div");
        topObstacle.classList.add("obstacle");
        topObstacle.style.width = "50px";
        topObstacle.style.height = `${obstacleHeight}px`;
        topObstacle.style.left = `${window.innerWidth}px`;
        topObstacle.style.top = "0px";

        // Create bottom obstacle
        let bottomObstacle = document.createElement("div");
        bottomObstacle.classList.add("obstacle");
        bottomObstacle.style.width = "50px";
        bottomObstacle.style.height = `${window.innerHeight - obstacleHeight - gap}px`;
        bottomObstacle.style.left = `${window.innerWidth}px`;
        bottomObstacle.style.top = `${obstacleHeight + gap}px`;

        // Append obstacles to the body
        document.body.appendChild(topObstacle);
        document.body.appendChild(bottomObstacle);

        // Add to obstacles array
        obstacles.push(topObstacle, bottomObstacle);

        // Move obstacles
        moveObstacles([topObstacle, bottomObstacle]);
      }, 2000);
    }

    // Function to move obstacles
    function moveObstacles(obstaclePair) {
      let moveInterval = setInterval(() => {
        if (isGameRunning) {
          obstaclePair.forEach(obstacle => {
            let currentLeft = parseInt(obstacle.style.left);
            if (currentLeft < -50) {
              // Remove obstacle if out of screen
              obstacle.remove();
              obstacles = obstacles.filter(item => item !== obstacle);
            } else {
              obstacle.style.left = `${currentLeft - 5}px`;
            }
          });
        } else {
          clearInterval(moveInterval);
        }
      }, 20);
    }

    // Function to check collisions
    function myHitOther(my1, my2) {
      let left1 = parseInt(my1.style.left);
      let right1 = left1 + parseInt(my1.offsetWidth);
      let top1 = parseInt(my1.style.top);
      let bottom1 = top1 + parseInt(my1.offsetHeight);
      let left2 = parseInt(my2.style.left);
      let right2 = left2 + parseInt(my2.offsetWidth);
      let top2 = parseInt(my2.style.top);
      let bottom2 = top2 + parseInt(my2.offsetHeight);

      return (
        right1 >= left2 &&
        bottom1 >= top2 &&
        left1 <= right2 &&
        top1 <= bottom2
      );
    }

    // Function to check hits and reset game on collision
    function myCheckHit() {
      obstacles.forEach(obstacle => {
        if (myHitOther(character, obstacle)) {
          alert("You lose! Restarting...");
          resetGame();
        }
      });
    }

    // Function to reset the game
    function resetGame() {
      clearInterval(scrollInterval);
      clearInterval(gravityInterval);
      clearInterval(obstacleInterval);

      obstacles.forEach(obstacle => obstacle.remove());
      obstacles = [];

      isGameRunning = false;
      myVerticalSpeed = 0;
      myGlobalX = 0;
      centerCharacter();

      document.querySelector("h1").style.display = "block";
      document.addEventListener("click", startGame, { once: true });
    }

    // Center character on load
    window.onload = centerCharacter;

    // Attach click listener to start the game
    document.addEventListener("click", startGame, { once: true });
  </script>
</body>
</html>
