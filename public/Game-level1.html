<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flappy Bird Style Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>
<body id="myBody" style="background-repeat:repeat; background-size: 100%; background-position: 0px 0px;" background="https://wallpapercave.com/wp/wp6957163.png" onload="startGame()">

  <h1 align="center" style="color: red;">T4A04 Maze by Fred</h1>

  <img id="myImg01" src="https://wallpapercave.com/wp/wp6957163.png" style="position:absolute; width:100px; height:80px; left:50px; top:190px;">
  <img id="myImg02" src="myImgNew.jpg" style="position:absolute; width:10px; height:200px; left:350px; top:90px;">
  <img id="myImg03" src="myImgNew.jpg" style="position:absolute; width:200px; height:10px; left:500px; top:400px;">
  <img id="myImg04" src="myImgNew.jpg" style="position:absolute; width:100px; height:80px; left:800px; top:400px;">

  <script>
    // Global Variables
    let myGravity = 1.5; // Gravity strength
    let myJump = -20; // Jump height
    let myGlobalX = 0; // Background scroll position
    let myVerticalSpeed = 0; // Speed of the character's vertical movement
    let isGameRunning = true;

    function startGame() {
      // Start the background scrolling
      scrollBackground();

      // Start the gravity loop
      applyGravity();

      // Add click listener for jumping
      document.addEventListener("click", jump);
    }

    function scrollBackground() {
      setInterval(() => {
        if (isGameRunning) {
          myGlobalX -= 2; // Move background left
          document.getElementById("myBody").style.backgroundPosition = `${myGlobalX}px 0px`;
        }
      }, 20);
    }

    function applyGravity() {
      setInterval(() => {
        if (isGameRunning) {
          let character = document.getElementById("myImg01");
          let currentTop = parseInt(character.style.top);

          // Apply gravity to the vertical speed
          myVerticalSpeed += myGravity;

          // Update character position
          character.style.top = `${currentTop + myVerticalSpeed}px`;

          // Check for collisions or boundaries
          myCheckHit();

          // Prevent character from falling below the screen
          if (currentTop + myVerticalSpeed >= window.innerHeight - 80) {
            character.style.top = `${window.innerHeight - 80}px`;
            myVerticalSpeed = 0; // Stop movement if at the bottom
          }

          // Prevent character from going above the screen
          if (currentTop + myVerticalSpeed <= 0) {
            character.style.top = `0px`;
          }
        }
      }, 20);
    }

    function jump() {
      if (isGameRunning) {
        myVerticalSpeed = myJump; // Apply an upward force
      }
    }

    function myHitOther(my1, my2) {
      let left1 = parseInt(document.getElementById(my1).style.left);
      let right1 = left1 + parseInt(document.getElementById(my1).style.width);
      let top1 = parseInt(document.getElementById(my1).style.top);
      let bottom1 = top1 + parseInt(document.getElementById(my1).style.height);
      let left2 = parseInt(document.getElementById(my2).style.left);
      let right2 = left2 + parseInt(document.getElementById(my2).style.width);
      let top2 = parseInt(document.getElementById(my2).style.top);
      let bottom2 = top2 + parseInt(document.getElementById(my2).style.height);

      return (
        right1 >= left2 &&
        bottom1 >= top2 &&
        left1 <= right2 &&
        top1 <= bottom2
      );
    }

    function myCheckHit() {
      let character = document.getElementById("myImg01");

      // Check collision with obstacles
      if (myHitOther("myImg01", "myImg02") || myHitOther("myImg01", "myImg03")) {
        alert("You lose! Restarting...");
        resetGame();
      }

      // Check collision with the winning element
      if (myHitOther("myImg01", "myImg04")) {
        alert("You win! Redirecting to the next level...");
        location.href = "https://www.google.ca";
      }
    }

    function resetGame() {
      let character = document.getElementById("myImg01");
      character.style.left = "50px";
      character.style.top = "190px";
      myVerticalSpeed = 0;
      myGlobalX = 0;
    }
  </script>
</body>
</html>
